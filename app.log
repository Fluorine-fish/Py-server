nohup: 忽略输入
W:modules.camera_manager:摄像头 0 虽然打开但无法读取帧
W:modules.camera_manager:摄像头 0 打开失败，尝试其他视频源...
[ WARN:0@9.711] global cap_v4l.cpp:913 open VIDEOIO(V4L2:/dev/video1): can't open camera by index
[ERROR:0@9.712] global obsensor_uvc_stream_channel.cpp:158 getStreamChannelGroup Camera index out of range
[ WARN:0@9.712] global cap_v4l.cpp:913 open VIDEOIO(V4L2:/dev/video2): can't open camera by index
[ERROR:0@9.712] global obsensor_uvc_stream_channel.cpp:158 getStreamChannelGroup Camera index out of range
[ WARN:0@9.712] global cap_v4l.cpp:913 open VIDEOIO(V4L2:/dev/video3): can't open camera by index
[ERROR:0@9.713] global obsensor_uvc_stream_channel.cpp:158 getStreamChannelGroup Camera index out of range
W:modules.camera_manager:视频源 /dev/video0 虽然打开但无法读取帧
E:modules.camera_manager:所有摄像头源都打开失败
W:modules.camera_manager:摄像头 0 虽然打开但无法读取帧
W:modules.camera_manager:摄像头 0 打开失败，尝试其他视频源...
[ WARN:0@9.830] global cap_v4l.cpp:913 open VIDEOIO(V4L2:/dev/video1): can't open camera by index
[ERROR:0@9.831] global obsensor_uvc_stream_channel.cpp:158 getStreamChannelGroup Camera index out of range
[ WARN:0@9.831] global cap_v4l.cpp:913 open VIDEOIO(V4L2:/dev/video2): can't open camera by index
[ERROR:0@9.832] global obsensor_uvc_stream_channel.cpp:158 getStreamChannelGroup Camera index out of range
[ WARN:0@9.832] global cap_v4l.cpp:913 open VIDEOIO(V4L2:/dev/video3): can't open camera by index
[ERROR:0@9.832] global obsensor_uvc_stream_channel.cpp:158 getStreamChannelGroup Camera index out of range
W:modules.camera_manager:视频源 /dev/video0 虽然打开但无法读取帧
E:modules.camera_manager:所有摄像头源都打开失败
E:modules.camera_manager:摄像头初始化失败，无法启动捕获线程
Error in cpuinfo: prctl(PR_SVE_GET_VL) failed
INFO: Created TensorFlow Lite XNNPACK delegate for CPU.
WARNING: All log messages before absl::InitializeLog() is called are written to STDERR
W0000 00:00:1755254921.761508  617198 inference_feedback_manager.cc:114] Feedback manager requires a model with a single signature inference. Disabling support for feedback tensors.
W0000 00:00:1755254921.783636  617201 inference_feedback_manager.cc:114] Feedback manager requires a model with a single signature inference. Disabling support for feedback tensors.
W0000 00:00:1755254921.899632  617189 inference_feedback_manager.cc:114] Feedback manager requires a model with a single signature inference. Disabling support for feedback tensors.
W0000 00:00:1755254921.953173  617189 inference_feedback_manager.cc:114] Feedback manager requires a model with a single signature inference. Disabling support for feedback tensors.
W rknn-toolkit-lite2 version: 2.3.2
W Query dynamic range failed. Ret code: RKNN_ERR_MODEL_INVALID. (If it is a static shape RKNN model, please ignore the above warning message.)
W rknn-toolkit-lite2 version: 2.3.2
W Query dynamic range failed. Ret code: RKNN_ERR_MODEL_INVALID. (If it is a static shape RKNN model, please ignore the above warning message.)
W rknn-toolkit-lite2 version: 2.3.2
W Query dynamic range failed. Ret code: RKNN_ERR_MODEL_INVALID. (If it is a static shape RKNN model, please ignore the above warning message.)
W rknn-toolkit-lite2 version: 2.3.2
W Query dynamic range failed. Ret code: RKNN_ERR_MODEL_INVALID. (If it is a static shape RKNN model, please ignore the above warning message.)
W rknn-toolkit-lite2 version: 2.3.2
W Query dynamic range failed. Ret code: RKNN_ERR_MODEL_INVALID. (If it is a static shape RKNN model, please ignore the above warning message.)
W rknn-toolkit-lite2 version: 2.3.2
W Query dynamic range failed. Ret code: RKNN_ERR_MODEL_INVALID. (If it is a static shape RKNN model, please ignore the above warning message.)
W rknn-toolkit-lite2 version: 2.3.2
W Query dynamic range failed. Ret code: RKNN_ERR_MODEL_INVALID. (If it is a static shape RKNN model, please ignore the above warning message.)
W rknn-toolkit-lite2 version: 2.3.2
I RKNN: [18:48:42.071] RKNN Runtime Information, librknnrt version: 2.3.2 (429f97ae6b@2025-04-09T09:09:27)
I RKNN: [18:48:42.071] RKNN Driver Information, version: 0.9.8
I RKNN: [18:48:42.071] RKNN Model Information, version: 6, toolkit version: 2.3.2(compiler version: 2.3.2 (e045de294f@2025-04-07T19:48:25)), target: RKNPU v2, target platform: rk3588, framework name: ONNX, framework layout: NCHW, model inference type: static_shape
W RKNN: [18:48:42.133] query RKNN_QUERY_INPUT_DYNAMIC_RANGE error, rknn model is static shape type, please export rknn with dynamic_shapes
I RKNN: [18:48:42.304] RKNN Runtime Information, librknnrt version: 2.3.2 (429f97ae6b@2025-04-09T09:09:27)
I RKNN: [18:48:42.304] RKNN Driver Information, version: 0.9.8
I RKNN: [18:48:42.304] RKNN Model Information, version: 6, toolkit version: 2.3.2(compiler version: 2.3.2 (e045de294f@2025-04-07T19:48:25)), target: RKNPU v2, target platform: rk3588, framework name: ONNX, framework layout: NCHW, model inference type: static_shape
W RKNN: [18:48:42.340] query RKNN_QUERY_INPUT_DYNAMIC_RANGE error, rknn model is static shape type, please export rknn with dynamic_shapes
I RKNN: [18:48:42.505] RKNN Runtime Information, librknnrt version: 2.3.2 (429f97ae6b@2025-04-09T09:09:27)
I RKNN: [18:48:42.505] RKNN Driver Information, version: 0.9.8
I RKNN: [18:48:42.505] RKNN Model Information, version: 6, toolkit version: 2.3.2(compiler version: 2.3.2 (e045de294f@2025-04-07T19:48:25)), target: RKNPU v2, target platform: rk3588, framework name: ONNX, framework layout: NCHW, model inference type: static_shape
W RKNN: [18:48:42.562] query RKNN_QUERY_INPUT_DYNAMIC_RANGE error, rknn model is static shape type, please export rknn with dynamic_shapes
I RKNN: [18:48:42.735] RKNN Runtime Information, librknnrt version: 2.3.2 (429f97ae6b@2025-04-09T09:09:27)
I RKNN: [18:48:42.735] RKNN Driver Information, version: 0.9.8
I RKNN: [18:48:42.736] RKNN Model Information, version: 6, toolkit version: 2.3.2(compiler version: 2.3.2 (e045de294f@2025-04-07T19:48:25)), target: RKNPU v2, target platform: rk3588, framework name: ONNX, framework layout: NCHW, model inference type: static_shape
W RKNN: [18:48:42.780] query RKNN_QUERY_INPUT_DYNAMIC_RANGE error, rknn model is static shape type, please export rknn with dynamic_shapes
I RKNN: [18:48:42.951] RKNN Runtime Information, librknnrt version: 2.3.2 (429f97ae6b@2025-04-09T09:09:27)
I RKNN: [18:48:42.951] RKNN Driver Information, version: 0.9.8
I RKNN: [18:48:42.951] RKNN Model Information, version: 6, toolkit version: 2.3.2(compiler version: 2.3.2 (e045de294f@2025-04-07T19:48:25)), target: RKNPU v2, target platform: rk3588, framework name: ONNX, framework layout: NCHW, model inference type: static_shape
W RKNN: [18:48:42.983] query RKNN_QUERY_INPUT_DYNAMIC_RANGE error, rknn model is static shape type, please export rknn with dynamic_shapes
I RKNN: [18:48:43.157] RKNN Runtime Information, librknnrt version: 2.3.2 (429f97ae6b@2025-04-09T09:09:27)
I RKNN: [18:48:43.157] RKNN Driver Information, version: 0.9.8
I RKNN: [18:48:43.157] RKNN Model Information, version: 6, toolkit version: 2.3.2(compiler version: 2.3.2 (e045de294f@2025-04-07T19:48:25)), target: RKNPU v2, target platform: rk3588, framework name: ONNX, framework layout: NCHW, model inference type: static_shape
W RKNN: [18:48:43.198] query RKNN_QUERY_INPUT_DYNAMIC_RANGE error, rknn model is static shape type, please export rknn with dynamic_shapes
I RKNN: [18:48:43.372] RKNN Runtime Information, librknnrt version: 2.3.2 (429f97ae6b@2025-04-09T09:09:27)
I RKNN: [18:48:43.372] RKNN Driver Information, version: 0.9.8
I RKNN: [18:48:43.372] RKNN Model Information, version: 6, toolkit version: 2.3.2(compiler version: 2.3.2 (e045de294f@2025-04-07T19:48:25)), target: RKNPU v2, target platform: rk3588, framework name: ONNX, framework layout: NCHW, model inference type: static_shape
W RKNN: [18:48:43.402] query RKNN_QUERY_INPUT_DYNAMIC_RANGE error, rknn model is static shape type, please export rknn with dynamic_shapes
I RKNN: [18:48:43.578] RKNN Runtime Information, librknnrt version: 2.3.2 (429W Query dynamic range failed. Ret code: RKNN_ERR_MODEL_INVALID. (If it is a static shape RKNN model, please ignore the above warning message.)
W rknn-toolkit-lite2 version: 2.3.2
W Query dynamic range failed. Ret code: RKNN_ERR_MODEL_INVALID. (If it is a static shape RKNN model, please ignore the above warning message.)
W rknn-toolkit-lite2 version: 2.3.2
W Query dynamic range failed. Ret code: RKNN_ERR_MODEL_INVALID. (If it is a static shape RKNN model, please ignore the above warning message.)
W rknn-toolkit-lite2 version: 2.3.2
W Query dynamic range failed. Ret code: RKNN_ERR_MODEL_INVALID. (If it is a static shape RKNN model, please ignore the above warning message.)
W rknn-toolkit-lite2 version: 2.3.2
W Query dynamic range failed. Ret code: RKNN_ERR_MODEL_INVALID. (If it is a static shape RKNN model, please ignore the above warning message.)
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.front
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround21
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround21
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround40
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround41
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround50
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround51
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround71
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.iec958
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.iec958
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.iec958
ALSA lib confmisc.c:1377:(snd_func_refer) Unable to find definition 'cards.0.pcm.hdmi.0:CARD=0,AES0=4,AES1=130,AES2=0,AES3=2'
ALSA lib conf.c:5205:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory
ALSA lib conf.c:5728:(snd_config_expand) Evaluate error: No such file or directory
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM hdmi
ALSA lib confmisc.c:1377:(snd_func_refer) Unable to find definition 'cards.0.pcm.hdmi.0:CARD=0,AES0=4,AES1=130,AES2=0,AES3=2'
ALSA lib conf.c:5205:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory
ALSA lib conf.c:5728:(snd_config_expand) Evaluate error: No such file or directory
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM hdmi
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.modem
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.modem
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline
ALSA lib pcm.c:2722:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline
ALSA lib pcm_oss.c:397:(_snd_pcm_oss_open) Cannot open device /dev/dsp
ALSA lib pcm_oss.c:397:(_snd_pcm_oss_open) Cannot open device /dev/dsp
ALSA lib confmisc.c:160:(snd_config_get_card) Invalid field card
ALSA lib pcm_usb_stream.c:482:(_snd_pcm_usb_stream_open) Invalid card 'card'
ALSA lib confmisc.c:160:(snd_config_get_card) Invalid field card
ALSA lib pcm_usb_stream.c:482:(_snd_pcm_usb_stream_open) Invalid card 'card'
视频状态API路由模块导入成功
情绪检测模块导入成功
========== Py-server 启动 (FastAPI) ==========

========== 开始初始化服务 ==========
数据库表初始化成功
数据库初始化完成
摄像头管理器初始化成功
正在初始化视频流处理器...
DEBUG: 初始化VideoStreamHandler，宽度=640，高度=360
DEBUG: 创建默认帧大小 (480, 640, 3)
DEBUG: VideoStreamHandler 帧处理线程启动
DEBUG: 流分辨率设置为 640x480，分辨率索引=1
DEBUG: VideoStreamHandler初始化完成
视频流处理器初始化成功
正在初始化姿势分析器...
DEBUG: 姿势分析器已注册为摄像头帧消费者
姿势分析器初始化成功
正在启动姿势分析系统...
使用共享摄像头管理器，跳过摄像头初始化
正在初始化姿势分析和情绪分析组件...
姿势分析系统启动成功
姿势分析系统自动启动成功
可用串口设备:
尝试直接连接到 /dev/ttyACM0
串口设备 /dev/ttyACM0 不存在
无法连接到 /dev/ttyACM0: [Errno 2] could not open port /dev/ttyACM0: [Errno 2] No such file or directory: '/dev/ttyACM0'
未找到任何可用串口设备
连接失败：未找到可用串口
串口通信处理器初始化失败: 无法连接到串口设备
串口通信系统未启动，但其他系统可以正常工作
正在初始化情绪检测服务...
情绪检测将使用共享摄像头（来自视频流处理器）
Loading face detection model with 6 NPU cores...
  初始化RKNN实例 1/6 (NPU Core 0)...
    强制使用NPU Core 0
  初始化RKNN实例 2/6 (NPU Core 1)...
    强制使用NPU Core 1
  初始化RKNN实例 3/6 (NPU Core 2)...
    强制使用NPU Core 2
  初始化RKNN实例 4/6 (NPU Core 3)...
    使用自动分配核心
  初始化RKNN实例 5/6 (NPU Core 4)...
    使用自动分配核心
  初始化RKNN实例 6/6 (NPU Core 5)...
    使用自动分配核心
  成功创建 6 个RKNN实例
  创建了 6 个RKNN实例用于并行推理
Face detection model loaded successfully
Loading emotion classification model with 6 NPU cores...
  初始化RKNN实例 1/6 (NPU Core 0)...
    强制使用NPU Core 0
  初始化RKNN实例 2/6 (NPU Core 1)...
    强制使用NPU Core 1
  初始化RKNN实例 3/6 (NPU Core 2)...
    强制使用NPU Core 2
  初始化RKNN实例 4/6 (NPU Core 3)...
    使用自动分配核心
  初始化RKNN实例 5/6 (NPU Core 4)...
    使用自动分配核心
  初始化RKNN实例 6/6 (NPU Core 5)...
    使用自动分配核心
  成功创建 6 个RKNN实例
  创建了 6 个RKNN实例用于并行推理
Emotion classification model loaded successfully
使用共享摄像头，跳过摄像头初始化
Warming up models with test frame...
模型预热完成
情绪检测模块启动成功（共享摄像头模式）
情绪检测服务初始化成功
正在初始化检测服务...
检测服务预留但未激活
正在初始化语音助手服务...
可用串口设备:
尝试直接连接到 /dev/ttyACM0
串口设备 /dev/ttyACM0 不存在
无法连接到 /dev/ttyACM0: [Errno 2] could not open port /dev/ttyACM0: [Errno 2] No such file or directory: '/dev/ttyACM0'
未找到任何可用串口设备
连接失败：未找到可用串口
串口通信初始化: 成功
助手创建 成功。
线程创建 成功。
语音助手初始化完成
语音助手服务初始化成功
欢迎消息播放成功
语音助手对话循环已启动，随时准备接收语音指令...
语音助手线程已启动
E:uvicorn.error:[Errno 98] error while attempting to bind on address ('0.0.0.0', 5100): address already in use
情绪检测循环已启动，开始持续检测...
语音助手对话循环出错: [Errno 9] Bad file descriptor
情绪检测线程已启动
[WebServer] 添加路径到sys.path: /home/cat/Py-server/webserver/../WebServer/backend
[WebServer] 成功挂载 pc_api 路由
[WebServer] 成功挂载 mobile_api 路由
[WebServer] 成功挂载 mock_api 路由
[WebServer] 成功挂载WebSocket支持
[DEBUG] Mobile dist path: /home/cat/Py-server/WebServer/frontend_mobile/dist
[DEBUG] Mobile dist exists: True
[DEBUG] Mobile assets path: /home/cat/Py-server/WebServer/frontend_mobile/dist/assets
[DEBUG] Mobile assets exists: True
[DEBUG] Mobile assets files: ['index-C_f0AEL9.css', 'index-BSSRhRYY.js']
[WebServer] 成功设置移动端前端路径: /home/cat/Py-server/webserver/../WebServer/frontend_mobile/dist
[WebServer] 成功设置PC端前端路径: /home/cat/Py-server/webserver/../WebServer/frontend_pc/dist
视频状态API路由已注册

========== 启动Web服务器 ==========
服务器地址: http://0.0.0.0:5100
API文档: http://0.0.0.0:5100/docs
视频流: http://0.0.0.0:5100/api/video
健康检查: http://0.0.0.0:5100/api/health
视频状态: http://0.0.0.0:5100/api/video/status
========================================
正在启动服务器: http://0.0.0.0:5100
f97ae6b@2025-04-09T09:09:27)
I RKNN: [18:48:43.578] RKNN Driver Information, version: 0.9.8
I RKNN: [18:48:43.578] RKNN Model Information, version: 6, toolkit version: 2.3.2(compiler version: 2.3.2 (e045de294f@2025-04-07T19:48:25)), target: RKNPU v2, target platform: rk3588, framework name: ONNX, framework layout: NCHW, model inference type: static_shape
W RKNN: [18:48:43.612] query RKNN_QUERY_INPUT_DYNAMIC_RANGE error, rknn model is static shape type, please export rknn with dynamic_shapes
I RKNN: [18:48:43.803] RKNN Runtime Information, librknnrt version: 2.3.2 (429f97ae6b@2025-04-09T09:09:27)
I RKNN: [18:48:43.803] RKNN Driver Information, version: 0.9.8
I RKNN: [18:48:43.803] RKNN Model Information, version: 6, toolkit version: 2.3.2(compiler version: 2.3.2 (e045de294f@2025-04-07T19:48:25)), target: RKNPU v2, target platform: rk3588, framework name: ONNX, framework layout: NCHW, model inference type: static_shape
W RKNN: [18:48:43.838] query RKNN_QUERY_INPUT_DYNAMIC_RANGE error, rknn model is static shape type, please export rknn with dynamic_shapes
I RKNN: [18:48:44.019] RKNN Runtime Information, librknnrt version: 2.3.2 (429f97ae6b@2025-04-09T09:09:27)
I RKNN: [18:48:44.019] RKNN Driver Information, version: 0.9.8
I RKNN: [18:48:44.019] RKNN Model Information, version: 6, toolkit version: 2.3.2(compiler version: 2.3.2 (e045de294f@2025-04-07T19:48:25)), target: RKNPU v2, target platform: rk3588, framework name: ONNX, framework layout: NCHW, model inference type: static_shape
W RKNN: [18:48:44.049] query RKNN_QUERY_INPUT_DYNAMIC_RANGE error, rknn model is static shape type, please export rknn with dynamic_shapes
I RKNN: [18:48:44.239] RKNN Runtime Information, librknnrt version: 2.3.2 (429f97ae6b@2025-04-09T09:09:27)
I RKNN: [18:48:44.239] RKNN Driver Information, version: 0.9.8
I RKNN: [18:48:44.240] RKNN Model Information, version: 6, toolkit version: 2.3.2(compiler version: 2.3.2 (e045de294f@2025-04-07T19:48:25)), target: RKNPU v2, target platform: rk3588, framework name: ONNX, framework layout: NCHW, model inference type: static_shape
W RKNN: [18:48:44.271] query RKNN_QUERY_INPUT_DYNAMIC_RANGE error, rknn model is static shape type, please export rknn with dynamic_shapes
I RKNN: [18:48:44.450] RKNN Runtime Information, librknnrt version: 2.3.2 (429f97ae6b@2025-04-09T09:09:27)
I RKNN: [18:48:44.450] RKNN Driver Information, version: 0.9.8
I RKNN: [18:48:44.450] RKNN Model Information, version: 6, toolkit version: 2.3.2(compiler version: 2.3.2 (e045de294f@2025-04-07T19:48:25)), target: RKNPU v2, target platform: rk3588, framework name: ONNX, framework layout: NCHW, model inference type: static_shape
W RKNN: [18:48:44.485] query RKNN_QUERY_INPUT_DYNAMIC_RANGE error, rknn model is static shape type, please export rknn with dynamic_shapes
正在关闭服务器...
姿势分析系统已停止
姿势监控服务已停止
情绪检测服务已停止（共享摄像头模式）
情绪检测服务已停止
正在关闭语音助手服务...
线程创建 成功。
语音助手服务已关闭
所有服务已关闭
